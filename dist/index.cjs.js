"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=new class{container=null;sections=null;activeSlide=0;activeSection=0;scrollMode="automatic";scrollingSpeed=700;transitionTimingFunction="ease";isDebug=!1;isScrolling=!1;isResizing=!1;isInitialized=!1;isWheelEnabled=!0;isKeyboardEnabled=!0;isTouchEnabled=!0;slidesIdentifyAttribute="page-scroller-slide";isAllowToScrollThroughSlides=!0};const n=new class{onSectionChange;onBeforeSectionChange};function t(){return{info:function(n){e.isDebug},error:function(n){e.isDebug},warn:function(n){e.isDebug},createMessage:function(e,n){return`[Page-Scroller]${n?`[${n.toUpperCase()}]`:""}: ${e}`}}}var o,i;function s(n){!function(n){if(!e.isAllowToScrollThroughSlides)return!1;if(!(e.sections[e.activeSection].slides?.elements.length>0))return!1;const t=e.sections[e.activeSection].slides,o="down"===n?e.activeSlide+1===t.elements.length:e.activeSlide-1==-1;return!o}(n)?r(n):l("down"===n?"right":"left")}function l(n){if(e.isScrolling)return;e.isScrolling=!0;const t=e.activeSlide;e.activeSlide="right"===n?t+1:t-1,function(n,t){Y.emit(j.onBeforeSlideChange,{beforeIndex:n,afterIndex:t});const o=e.sections[e.activeSection];o.slides.elements[n]?.classList.remove(i.active);const s=`translate3d(-${o.slides.elements[t].offsetLeft}px, 0px, 0px)`;o.slides.container.style.transform=s,o.slides.container.style.webkitTransform=s,e.sections[e.activeSection].slides.elements[t].classList.add(i.active),setTimeout((()=>{e.isScrolling=!1,Y.emit(j.onSlideChange,{beforeIndex:n,afterIndex:t})}),e.scrollingSpeed)}(t,e.activeSlide)}function r(n){if(e.isScrolling)return;e.isScrolling=!0;const t=e.activeSection;if(!function(n){return"down"===n?e.sections.length!=e.activeSection+1:e.activeSection-1!=-1}(n))return e.isScrolling=!1;e.activeSection="down"===n?t+1:t-1,a(t,e.activeSection)}function c(n){if(e.isScrolling)return;e.isScrolling=!0;const t=e.activeSection;if(!function(n){return n>=0&&n<e.sections.length}(n))return e.isScrolling=!1;e.sections[t].element.classList.remove(o.activeSection),e.activeSection=n,a(t,e.activeSection)}function a(n,t){Y.emit(j.onBeforeSectionChange,{beforeIndex:n,afterIndex:t}),e.sections[n].element.classList.remove(o.activeSection);const i=`translate3d(0px, -${e.sections[t].element.offsetTop}px, 0px)`;e.container.style.transform=i,e.container.style.webkitTransform=i,e.sections[t].element.classList.add(o.activeSection),setTimeout((()=>{e.isScrolling=!1,Y.emit(j.onSectionChange,{beforeIndex:n,afterIndex:t})}),700)}!function(e){e.html="page-scroller-enabled",e.body="page-scoller-body",e.container="page-scroller-wrapper",e.section="page-scroller-section",e.sectionWithSlides="page-scroller-section-with-slides",e.activeSection="page-scroller-section-active",e.slide="page-scroller-slide"}(o||(o={})),function(e){e.wrapper="page-scroller-slide-wrapper",e.wrapperDestroyed="page-scroller-slide-wrapper-destroyed",e.active="page-scroller-slide-active"}(i||(i={}));function d(e,n){const t=e.slice(Math.max(e.length-n,0)).reduce(((e,n)=>e+n),0);return Math.ceil(t/n)}let u,g=[];const h=t();function f(e){h.info("Wheel event detected"),clearTimeout(u),u=setTimeout((()=>{g=[]}),200);const n=-e.deltaY||e.detail,t=(o=n,Math.max(-1,Math.min(1,o))<0?"down":"up");var o;if(g.length>100&&g.shift(),g.push(Math.abs(n)),function(){const e=d(g,5),n=d(g,50);return e>=n}())return s(t)}const m=t();let S=null;function p(n){m.info("Keydown event detected");const t=n.key;if(!function(){const e=document.activeElement;return["input","textarea"].includes(e.tagName.toLowerCase())}())switch(t){case" ":case"ArrowDown":case"PageDown":s("down");break;case"ArrowUp":case"PageUp":s("up");break;case"ArrowRight":l("right");case"ArrowLeft":l("left");case"End":c(e.sections.length-1);break;case"Home":c(0);break;case"Tab":!function(n){const t=n.shiftKey,o=document.activeElement,i=v(e.sections[e.activeSection].element),l=o===i[0],r=o===i[i.length-1];if(t&&l||!t&&r){n.preventDefault();const e=t&&l?"up":"down";S="up"===e?"last":"first",s(e)}}(n)}}function y(){if(!S)return;const n=v(e.sections[e.activeSection].element);n["first"===S?0:n.length-1].focus(),S=null}function v(e){return[].slice.call(e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], summary:not([disabled]), [contenteditable]')).filter((e=>"-1"!==e.getAttribute("tabindex")&&null!==e.offsetParent))}const b=t();let w={};function x(e){const n=C(e);w={x:n.x,y:n.y}}function E(e){b.info("Touch move event detected");const n=C(e),t=Math.abs(n.y-w.y)>window.innerHeight/100*5,o=w.y>n.y?"down":"up";t&&s(o)}function C(e){return{x:e.touches[0].pageX,y:e.touches[0].pageY}}function M(){"manual"!==e.scrollMode&&(e.isWheelEnabled&&(h.info("Wheel event registered"),document.body.addEventListener("wheel",f)),e.isKeyboardEnabled&&(document.addEventListener("keydown",p),Y.on(j.onSectionChange,y)),e.isTouchEnabled&&(document.addEventListener("touchstart",x),e.container.addEventListener("touchmove",E,{passive:!1})),R(),window.addEventListener("resize",R))}function T(){document.removeEventListener("keydown",p),Y.off(j.onSectionChange),h.info("Wheel event registered"),document.body.removeEventListener("wheel",f),document.removeEventListener("touchstart",x),e.container.removeEventListener("touchmove",E),N(),clearTimeout(K),window.removeEventListener("resize",R)}const L="automatic",A=700,P="ease",I="page-scroller-slide",B=!1,D=!1,z=!0,k=!0,$=!0;const q=t();function W(t){q.info("Initializing Page Scroller..."),t&&(function(n){e.scrollMode=n.scrollMode??L,e.scrollingSpeed=n.scrollingSpeed??A,e.transitionTimingFunction=n.transitionTimingFunction??P,e.isDebug=n.isDebug??D,e.isWheelEnabled=n.isWheelEnabled??z,e.isKeyboardEnabled=n.isKeyboardEnabled??k,e.isTouchEnabled=n.isTouchEnabled??$,e.slidesIdentifyAttribute=n.slidesIdentifyAttribute??I,e.isAllowToScrollThroughSlides=n.isAllowToScrollThroughSlides??B}(t),function(e){e.onSectionChange&&(n.onSectionChange=e.onSectionChange,Y.on(j.onSectionChange,(e=>n.onSectionChange(e)))),e.onBeforeSectionChange&&(n.onBeforeSectionChange=e.onBeforeSectionChange,Y.on(j.onBeforeSectionChange,(e=>n.onBeforeSectionChange(e))))}(t)),function(){document.querySelector("html").classList.add(o.html);document.querySelector("body").classList.add(o.body),e.container.classList.add(o.container);const n=`transform ${e.scrollingSpeed}ms ${e.transitionTimingFunction}`;e.container.style.transition=n,e.sections=Array.from(e.container.children).map((n=>{const t=n,s=Array.from(t.children).filter((n=>n.hasAttribute(e.slidesIdentifyAttribute)));if(s.forEach((e=>e.classList.add(o.slide))),!s.length)return{element:t,slides:null};const l=function(n,t){const s=document.createElement("div");s.classList.add(i.wrapper);const l=`transform ${e.scrollingSpeed}ms ${e.transitionTimingFunction}`;s.style.transition=l,s.style.width=100*t.length+"%",t.forEach((e=>{e.style.width=100/t.length+"%",s.appendChild(e)}));const r=document.createElement("div");return r.classList.add(o.sectionWithSlides),r.appendChild(s),n.appendChild(r),s}(t,s);return{element:t,slides:{container:l,elements:s}}})),e.sections.forEach((e=>e.element.classList.add(o.section))),"automatic"===e.scrollMode?O():U()}(),M(),Y.on(j.onPageScrollModeAutomatic,(()=>{O(),e.sections.forEach((n=>{n.slides&&(n.slides.container.classList.remove(i.wrapperDestroyed),n.slides.container.style.width=100*n.slides.elements.length+"%",e.activeSlide=0,R(),n.slides.elements.forEach((e=>{e.style.width=100/n.slides.elements.length+"%",e.style.height=null})))})),M()})),Y.on(j.onPageScrollModeManual,(()=>{U(),e.sections.forEach((e=>{e.slides&&(e.slides.container.classList.add(i.wrapperDestroyed),e.slides.container.style.width="100%",e.slides.container.style.transform="none",e.slides.elements.forEach((e=>{e.style.width="100%",e.style.height="100%"})))})),T()})),e.isInitialized=!0,q.info("Initialized Page Scroller.")}const F=t();let K,H=!1;function R(){F.info("Resize event has been triggered."),H||N(),H=!0,clearTimeout(K),K=setTimeout((()=>{e.isResizing=!0,N(),function(){if("manual"===e.scrollMode)return;const n=`translate3d(0px, -${e.sections[e.activeSection].element.offsetTop}px, 0px)`;e.container.style.transform=n,e.container.style.webkitTransform=n}(),H=!1}),400)}function N(){!function(n){e.sections.forEach((t=>{const o=(()=>"automatic"===e.scrollMode?n:t.slides?n*t.slides.elements.length:n)();t.element.style.height=`${o}px`}))}(window?window.innerHeight:document.documentElement.offsetHeight)}function O(){const n=document.querySelector("body");n.style.overflow="hidden",n.style.height="100%";const t=document.querySelector("html");t.style.overflow="hidden",t.style.height="100%";const o=`transform ${e.scrollingSpeed}ms ${e.transitionTimingFunction}`;e.container.style.transition=o}function U(){const n=document.querySelector("body");n.style.overflow="auto",n.style.height="initial";const t=document.querySelector("html");t.style.overflow="auto",t.style.height="initial",e.container.style.transition="",e.container.style.transform="none",e.container.style.webkitTransform="none"}var j;!function(e){e.onSectionChange="onSectionChange",e.onBeforeSectionChange="onBeforeSectionChange",e.onSlideChange="onSlideChange",e.onBeforeSlideChange="onBeforeSlideChange",e.onPageScrollStatusChanged="onPageScrollStatusChanged",e.onPageScrollModeAutomatic="onPageScrollModeAutomatic",e.onPageScrollModeManual="onPageScrollModeManual"}(j||(j={}));const Y={all:_=_||new Map,on(e,n){const t=_.get(e);t?t.push(n):_.set(e,[n])},off(e,n){const t=_.get(e);t&&(n?t.splice(t.indexOf(n)>>>0,1):_.set(e,[]))},emit(e,n){let t=_.get(e);t&&t.slice().map((e=>{e(n)})),t=_.get("*"),t&&t.slice().map((t=>{t(e,n)}))}};var _;!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}("html.page-scroller-enabled, .page-scroller-enabled body {\n    margin: 0;\n    padding: 0;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n\n.page-scoller-body {\n    height: 100%;\n    position: relative;\n}\n\n.page-scroller-wrapper {\n    height: 100%;\n    width: 100%;\n    position: relative;\n}\n\n.page-scroller-section {\n    height: 100%;\n    display: block;\n    position: relative;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n}\n\n.page-scroller-section-with-slides {\n    z-index: 1;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n    -webkit-transition: all .3s ease-out;\n    transition: all .3s ease-out;\n}\n\n.page-scroller-slide-wrapper {\n    height: 100%;\n    display: flex;\n    float: left;\n    position: relative;\n}\n\n.page-scroller-slide-wrapper-destroyed {\n    flex-direction: column;\n}\n");const X=t();exports.changeScrollingMode=function(n){e.scrollMode!==n&&(e.scrollMode=n,Y.emit("automatic"===n?j.onPageScrollModeAutomatic:j.onPageScrollModeManual))},exports.changeSectionByDirection=r,exports.changeSectionBySpecificIndex=c,exports.changeSectionOrSlideByDirection=s,exports.changeSlideByDirection=l,exports.getActiveSection=()=>e.activeSection,exports.isAutomaticScrollingMode=()=>"automatic"===e.scrollMode,exports.isManualScrollingMode=()=>"manual"===e.scrollMode,exports.onDestroy=function(){q.warn("Destroying Page Scroller..."),function(){document.querySelector("html").classList.remove(o.html);document.querySelector("body").classList.remove(o.body),e.container.classList.remove(o.container),e.container.style.transition="",e.container.style.transform="none",e.container.style.webkitTransform="none",e.sections.forEach((e=>e.element.classList.remove(o.section)))}(),T(),Y.off(j.onPageScrollModeManual),Y.off(j.onPageScrollModeAutomatic),e.container=null,e.sections=null,e.activeSlide=0,e.activeSection=0,e.transitionTimingFunction=P,e.scrollingSpeed=A,e.slidesIdentifyAttribute=I,e.isAllowToScrollThroughSlides=B,e.isDebug=D,e.isScrolling=!1,e.isInitialized=!1,e.isWheelEnabled=z,e.isKeyboardEnabled=k,e.isTouchEnabled=$,n.onSectionChange=()=>{},Y.off(j.onSectionChange),n.onBeforeSectionChange=()=>{},Y.off(j.onBeforeSectionChange),e.isInitialized=!1,q.warn("Destroyed Page Scroller.")},exports.usePageScroller=function(n){return{initPageScroller:function(t){if(X.info("Initializing page scroller..."),e.isInitialized)throw new Error(X.createMessage("Page scroller is already initialized."));if(void 0===t)throw new Error(X.createMessage("Please provide a valid selector."));if(e.container=document.querySelector(t),!e.container)throw new Error(X.createMessage("Container not found. Please provide a valid selector."));W(n)},changeSectionByDirection:r,changeSectionBySpecificIndex:c}};
//# sourceMappingURL=index.cjs.js.map
