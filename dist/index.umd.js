!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self)["Page Scroller"]={})}(this,(function(e){"use strict";const n=new class{container=null;sections=null;activeSlide=0;activeSection=0;scrollMode="automatic";scrollingSpeed=700;transitionTimingFunction="ease";isDebug=!1;isScrolling=!1;isResizing=!1;isInitialized=!1;isWheelEnabled=!0;isKeyboardEnabled=!0;isTouchEnabled=!0;slidesIdentifyAttribute="page-scroller-slide";isAllowToScrollThroughSlides=!0};const t=new class{onSectionChange;onBeforeSectionChange};function o(){return{info:function(e){n.isDebug},error:function(e){n.isDebug},warn:function(e){n.isDebug},createMessage:function(e,n){return`[Page-Scroller]${n?`[${n.toUpperCase()}]`:""}: ${e}`}}}var i,s;function l(e){!function(e){if(!n.isAllowToScrollThroughSlides)return!1;if(!(n.sections[n.activeSection].slides?.elements.length>0))return!1;const t=n.sections[n.activeSection].slides,o="down"===e?n.activeSlide+1===t.elements.length:n.activeSlide-1==-1;return!o}(e)?r(e):c("down"===e?"right":"left")}function c(e){if(n.isScrolling)return;n.isScrolling=!0;const t=n.activeSlide;n.activeSlide="right"===e?t+1:t-1,function(e,t){_.emit(Y.onBeforeSlideChange,{beforeIndex:e,afterIndex:t});const o=n.sections[n.activeSection];o.slides.elements[e]?.classList.remove(s.active);const i=`translate3d(-${o.slides.elements[t].offsetLeft}px, 0px, 0px)`;o.slides.container.style.transform=i,o.slides.container.style.webkitTransform=i,n.sections[n.activeSection].slides.elements[t].classList.add(s.active),setTimeout((()=>{n.isScrolling=!1,_.emit(Y.onSlideChange,{beforeIndex:e,afterIndex:t})}),n.scrollingSpeed)}(t,n.activeSlide)}function r(e){if(n.isScrolling)return;n.isScrolling=!0;const t=n.activeSection;if(!function(e){return"down"===e?n.sections.length!=n.activeSection+1:n.activeSection-1!=-1}(e))return n.isScrolling=!1;n.activeSection="down"===e?t+1:t-1,d(t,n.activeSection)}function a(e){if(n.isScrolling)return;n.isScrolling=!0;const t=n.activeSection;if(!function(e){return e>=0&&e<n.sections.length}(e))return n.isScrolling=!1;n.sections[t].element.classList.remove(i.activeSection),n.activeSection=e,d(t,n.activeSection)}function d(e,t){_.emit(Y.onBeforeSectionChange,{beforeIndex:e,afterIndex:t}),n.sections[e].element.classList.remove(i.activeSection);const o=`translate3d(0px, -${n.sections[t].element.offsetTop}px, 0px)`;n.container.style.transform=o,n.container.style.webkitTransform=o,n.sections[t].element.classList.add(i.activeSection),setTimeout((()=>{n.isScrolling=!1,_.emit(Y.onSectionChange,{beforeIndex:e,afterIndex:t})}),700)}!function(e){e.html="page-scroller-enabled",e.body="page-scoller-body",e.container="page-scroller-wrapper",e.section="page-scroller-section",e.sectionWithSlides="page-scroller-section-with-slides",e.activeSection="page-scroller-section-active",e.slide="page-scroller-slide"}(i||(i={})),function(e){e.wrapper="page-scroller-slide-wrapper",e.wrapperDestroyed="page-scroller-slide-wrapper-destroyed",e.active="page-scroller-slide-active"}(s||(s={}));function u(e,n){const t=e.slice(Math.max(e.length-n,0)).reduce(((e,n)=>e+n),0);return Math.ceil(t/n)}let f,g=[];const h=o();function m(e){h.info("Wheel event detected"),clearTimeout(f),f=setTimeout((()=>{g=[]}),200);const n=-e.deltaY||e.detail,t=(o=n,Math.max(-1,Math.min(1,o))<0?"down":"up");var o;if(g.length>100&&g.shift(),g.push(Math.abs(n)),function(){const e=u(g,5),n=u(g,50);return e>=n}())return l(t)}const S=o();let p=null;function y(e){S.info("Keydown event detected");const t=e.key;if(!function(){const e=document.activeElement;return["input","textarea"].includes(e.tagName.toLowerCase())}())switch(t){case" ":case"ArrowDown":case"PageDown":l("down");break;case"ArrowUp":case"PageUp":l("up");break;case"ArrowRight":c("right");case"ArrowLeft":c("left");case"End":a(n.sections.length-1);break;case"Home":a(0);break;case"Tab":!function(e){const t=e.shiftKey,o=document.activeElement,i=b(n.sections[n.activeSection].element),s=o===i[0],c=o===i[i.length-1];if(t&&s||!t&&c){e.preventDefault();const n=t&&s?"up":"down";p="up"===n?"last":"first",l(n)}}(e)}}function v(){if(!p)return;const e=b(n.sections[n.activeSection].element);e["first"===p?0:e.length-1].focus(),p=null}function b(e){return[].slice.call(e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], summary:not([disabled]), [contenteditable]')).filter((e=>"-1"!==e.getAttribute("tabindex")&&null!==e.offsetParent))}const w=o();let x={};function E(e){const n=C(e);x={x:n.x,y:n.y}}function T(e){w.info("Touch move event detected");const n=C(e),t=Math.abs(n.y-x.y)>window.innerHeight/100*5,o=x.y>n.y?"down":"up";t&&l(o)}function C(e){return{x:e.touches[0].pageX,y:e.touches[0].pageY}}function M(){"manual"!==n.scrollMode&&(n.isWheelEnabled&&(h.info("Wheel event registered"),document.body.addEventListener("wheel",m)),n.isKeyboardEnabled&&(document.addEventListener("keydown",y),_.on(Y.onSectionChange,v)),n.isTouchEnabled&&(document.addEventListener("touchstart",E),n.container.addEventListener("touchmove",T,{passive:!1})),j(),window.addEventListener("resize",j))}function L(){document.removeEventListener("keydown",y),_.off(Y.onSectionChange),h.info("Wheel event registered"),document.body.removeEventListener("wheel",m),document.removeEventListener("touchstart",E),n.container.removeEventListener("touchmove",T),N(),clearTimeout(H),window.removeEventListener("resize",j)}const A="automatic",P=700,I="ease",B="page-scroller-slide",D=!1,z=!1,k=!0,$=!0,q=!0;const W=o();function F(e){W.info("Initializing Page Scroller..."),e&&(function(e){n.scrollMode=e.scrollMode??A,n.scrollingSpeed=e.scrollingSpeed??P,n.transitionTimingFunction=e.transitionTimingFunction??I,n.isDebug=e.isDebug??z,n.isWheelEnabled=e.isWheelEnabled??k,n.isKeyboardEnabled=e.isKeyboardEnabled??$,n.isTouchEnabled=e.isTouchEnabled??q,n.slidesIdentifyAttribute=e.slidesIdentifyAttribute??B,n.isAllowToScrollThroughSlides=e.isAllowToScrollThroughSlides??D}(e),function(e){e.onSectionChange&&(t.onSectionChange=e.onSectionChange,_.on(Y.onSectionChange,(e=>t.onSectionChange(e)))),e.onBeforeSectionChange&&(t.onBeforeSectionChange=e.onBeforeSectionChange,_.on(Y.onBeforeSectionChange,(e=>t.onBeforeSectionChange(e))))}(e)),function(){document.querySelector("html").classList.add(i.html);document.querySelector("body").classList.add(i.body),n.container.classList.add(i.container);const e=`transform ${n.scrollingSpeed}ms ${n.transitionTimingFunction}`;n.container.style.transition=e,n.sections=Array.from(n.container.children).map((e=>{const t=e,o=Array.from(t.children).filter((e=>e.hasAttribute(n.slidesIdentifyAttribute)));if(o.forEach((e=>e.classList.add(i.slide))),!o.length)return{element:t,slides:null};const l=function(e,t){const o=document.createElement("div");o.classList.add(s.wrapper);const l=`transform ${n.scrollingSpeed}ms ${n.transitionTimingFunction}`;o.style.transition=l,o.style.width=100*t.length+"%",t.forEach((e=>{e.style.width=100/t.length+"%",o.appendChild(e)}));const c=document.createElement("div");return c.classList.add(i.sectionWithSlides),c.appendChild(o),e.appendChild(c),o}(t,o);return{element:t,slides:{container:l,elements:o}}})),n.sections.forEach((e=>e.element.classList.add(i.section))),"automatic"===n.scrollMode?O():U()}(),M(),_.on(Y.onPageScrollModeAutomatic,(()=>{O(),n.sections.forEach((e=>{e.slides&&(e.slides.container.classList.remove(s.wrapperDestroyed),e.slides.container.style.width=100*e.slides.elements.length+"%",n.activeSlide=0,j(),e.slides.elements.forEach((n=>{n.style.width=100/e.slides.elements.length+"%",n.style.height=null})))})),M()})),_.on(Y.onPageScrollModeManual,(()=>{U(),n.sections.forEach((e=>{e.slides&&(e.slides.container.classList.add(s.wrapperDestroyed),e.slides.container.style.width="100%",e.slides.container.style.transform="none",e.slides.elements.forEach((e=>{e.style.width="100%",e.style.height="100%"})))})),L()})),n.isInitialized=!0,W.info("Initialized Page Scroller.")}const K=o();let H,R=!1;function j(){K.info("Resize event has been triggered."),R||N(),R=!0,clearTimeout(H),H=setTimeout((()=>{n.isResizing=!0,N(),function(){if("manual"===n.scrollMode)return;const e=`translate3d(0px, -${n.sections[n.activeSection].element.offsetTop}px, 0px)`;n.container.style.transform=e,n.container.style.webkitTransform=e}(),R=!1}),400)}function N(){!function(e){n.sections.forEach((t=>{const o=(()=>"automatic"===n.scrollMode?e:t.slides?e*t.slides.elements.length:e)();t.element.style.height=`${o}px`}))}(window?window.innerHeight:document.documentElement.offsetHeight)}function O(){const e=document.querySelector("body");e.style.overflow="hidden",e.style.height="100%";const t=document.querySelector("html");t.style.overflow="hidden",t.style.height="100%";const o=`transform ${n.scrollingSpeed}ms ${n.transitionTimingFunction}`;n.container.style.transition=o}function U(){const e=document.querySelector("body");e.style.overflow="auto",e.style.height="initial";const t=document.querySelector("html");t.style.overflow="auto",t.style.height="initial",n.container.style.transition="",n.container.style.transform="none",n.container.style.webkitTransform="none"}var Y;!function(e){e.onSectionChange="onSectionChange",e.onBeforeSectionChange="onBeforeSectionChange",e.onSlideChange="onSlideChange",e.onBeforeSlideChange="onBeforeSlideChange",e.onPageScrollStatusChanged="onPageScrollStatusChanged",e.onPageScrollModeAutomatic="onPageScrollModeAutomatic",e.onPageScrollModeManual="onPageScrollModeManual"}(Y||(Y={}));const _={all:X=X||new Map,on(e,n){const t=X.get(e);t?t.push(n):X.set(e,[n])},off(e,n){const t=X.get(e);t&&(n?t.splice(t.indexOf(n)>>>0,1):X.set(e,[]))},emit(e,n){let t=X.get(e);t&&t.slice().map((e=>{e(n)})),t=X.get("*"),t&&t.slice().map((t=>{t(e,n)}))}};var X;!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}("html.page-scroller-enabled, .page-scroller-enabled body {\n    margin: 0;\n    padding: 0;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n\n.page-scoller-body {\n    height: 100%;\n    position: relative;\n}\n\n.page-scroller-wrapper {\n    height: 100%;\n    width: 100%;\n    position: relative;\n}\n\n.page-scroller-section {\n    height: 100%;\n    display: block;\n    position: relative;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n}\n\n.page-scroller-section-with-slides {\n    z-index: 1;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n    -webkit-transition: all .3s ease-out;\n    transition: all .3s ease-out;\n}\n\n.page-scroller-slide-wrapper {\n    height: 100%;\n    display: flex;\n    float: left;\n    position: relative;\n}\n\n.page-scroller-slide-wrapper-destroyed {\n    flex-direction: column;\n}\n");const G=o();e.changeScrollingMode=function(e){n.scrollMode!==e&&(n.scrollMode=e,_.emit("automatic"===e?Y.onPageScrollModeAutomatic:Y.onPageScrollModeManual))},e.changeSectionByDirection=r,e.changeSectionBySpecificIndex=a,e.changeSectionOrSlideByDirection=l,e.changeSlideByDirection=c,e.getActiveSection=()=>n.activeSection,e.isAutomaticScrollingMode=()=>"automatic"===n.scrollMode,e.isManualScrollingMode=()=>"manual"===n.scrollMode,e.onDestroy=function(){W.warn("Destroying Page Scroller..."),function(){document.querySelector("html").classList.remove(i.html);document.querySelector("body").classList.remove(i.body),n.container.classList.remove(i.container),n.container.style.transition="",n.container.style.transform="none",n.container.style.webkitTransform="none",n.sections.forEach((e=>e.element.classList.remove(i.section)))}(),L(),_.off(Y.onPageScrollModeManual),_.off(Y.onPageScrollModeAutomatic),n.container=null,n.sections=null,n.activeSlide=0,n.activeSection=0,n.transitionTimingFunction=I,n.scrollingSpeed=P,n.slidesIdentifyAttribute=B,n.isAllowToScrollThroughSlides=D,n.isDebug=z,n.isScrolling=!1,n.isInitialized=!1,n.isWheelEnabled=k,n.isKeyboardEnabled=$,n.isTouchEnabled=q,t.onSectionChange=()=>{},_.off(Y.onSectionChange),t.onBeforeSectionChange=()=>{},_.off(Y.onBeforeSectionChange),n.isInitialized=!1,W.warn("Destroyed Page Scroller.")},e.usePageScroller=function(e){return{initPageScroller:function(t){if(G.info("Initializing page scroller..."),n.isInitialized)throw new Error(G.createMessage("Page scroller is already initialized."));if(void 0===t)throw new Error(G.createMessage("Please provide a valid selector."));if(n.container=document.querySelector(t),!n.container)throw new Error(G.createMessage("Container not found. Please provide a valid selector."));F(e)},changeSectionByDirection:r,changeSectionBySpecificIndex:a}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.js.map
